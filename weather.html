<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç›®çš„åœ°å¤©æ°£ - æ—…éŠåŠ©æ‰‹</title>
<style>
/* å»¶çºŒä½ åŸæœ¬çš„é¢¨æ ¼æ ¸å¿ƒ */
* { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans TC", sans-serif; font-weight: 800; }
body { 
    margin: 0; 
    min-height: 100vh; 
    padding: 20px; 
    position: relative;
}

.bg-fixed { 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 

    background-image: url('images/weather/weatherbg.jpeg'); 
    background-size: cover; 
    background-position: center; 
    z-index: -1; 
}

header { 
    padding: 16px; text-align: center; font-size: 24px; 
    border: 3px solid #000; background: #fff; 
    box-shadow: 6px 6px 0 #000; margin-bottom: 30px; 
}

header, .weather-card, input, .tag-btn {
    background: rgba(255, 255, 255, 0.9) !important;
    backdrop-filter: blur(5px);
}

.search-box {
    display: flex; gap: 10px; margin-bottom: 25px;
}

input {
    flex: 1; border: 3px solid #000; padding: 12px;
    font-size: 16px; box-shadow: 4px 4px 0 #000;
}

.search-btn {
    background: #ff8c00; border: 3px solid #000;
    padding: 0 20px; box-shadow: 4px 4px 0 #000; cursor: pointer;
}

/* å¤©æ°£å¡ç‰‡è¨­è¨ˆ */
.weather-card {
    background: #fff; border: 3px solid #000;
    padding: 25px; box-shadow: 8px 8px 0 #000;
    display: none; /* åˆå§‹éš±è— */
}

.city-name { font-size: 28px; margin-bottom: 5px; text-transform: uppercase; }
.temp-main { font-size: 54px; color: #ff8c00; margin: 15px 0; }
.condition { font-size: 20px; border-bottom: 3px solid #000; padding-bottom: 10px; margin-bottom: 15px; }

.details-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
}

.detail-item {
    border: 2px solid #000; padding: 10px; background: #f9f9f9;
}

.label { font-size: 12px; color: #666; display: block; }
.value { font-size: 18px; }

.back-btn {
    margin-top: 30px; display: inline-block;
    padding: 10px 20px; border: 3px solid #000;
    background: #fff; text-decoration: none; color: #000;
    box-shadow: 4px 4px 0 #000;
}

.quick-select {
    margin-bottom: 25px;
}

.tag-container {
    display: flex;
    flex-wrap: wrap; /* è‡ªå‹•æ›è¡Œ */
    gap: 10px;
}

.tag-btn {
    background: #fff;
    border: 3px solid #000;
    padding: 8px 12px;
    font-size: 14px;
    font-weight: 800;
    cursor: pointer;
    box-shadow: 3px 3px 0 #000;
    transition: all 0.1s;
}

.tag-btn:active {
    transform: translate(2px, 2px);
    box-shadow: 1px 1px 0 #000;
    background: #ff8c00;
    color: #fff;
}

</style>
</head>
<body>
<div class="bg-fixed"></div>
<header>ğŸŒ ç›®çš„åœ°å¤©æ°£</header>

<div class="search-box">
    <input type="text" id="cityInput" placeholder="è¼¸å…¥åŸå¸‚ (ä¾‹å¦‚: Tokyo)">
    <button class="search-btn" onclick="getWeather()">æŸ¥è©¢</button>
</div>

<div class="quick-select">
    <div class="info-label" style="margin-bottom: 8px;">å¿«é€Ÿé¸æ“‡ç›®çš„åœ°ï¼š</div>
    <div class="tag-container">
        <button class="tag-btn" onclick="quickSearch('Macau')">ğŸ‡²ğŸ‡´ æ¾³é–€</button>
        <button class="tag-btn" onclick="quickSearch('Hong Kong')">ğŸ‡­ğŸ‡° é¦™æ¸¯</button>
        <button class="tag-btn" onclick="quickSearch('Taipei')">ğŸ‡¹ğŸ‡¼ å°åŒ—</button>
        <button class="tag-btn" onclick="quickSearch('Tokyo')">ğŸ‡¯ğŸ‡µ æ±äº¬</button>
        <button class="tag-btn" onclick="quickSearch('Sendai')">ğŸ‡¯ğŸ‡µ ä»™å°</button>
        <button class="tag-btn" onclick="quickSearch('Urayasu')">ğŸ¡ è¿ªå£«å°¼</button>
        <button class="tag-btn" onclick="quickSearch('Kaminoyama')">ğŸ‡¯ğŸ‡µ ä¸Šå±±</button>
        <button class="tag-btn" onclick="quickSearch('Yamagata')">ğŸ‡¯ğŸ‡µ å±±å½¢</button>
        <button class="tag-btn" onclick="quickSearch('Incheon International Airport')">ğŸ‡°ğŸ‡· ä»å·æ©Ÿå ´</button>
    </div>
</div>

<div class="weather-card" id="weatherCard">
    <div class="city-name" id="cityName">---</div>
    <div class="condition" id="conditionText">---</div>
    <div class="temp-main"><span id="tempValue">0</span>Â°C</div>
    
    <div class="details-grid">
        <div class="detail-item">
            <span class="label">é«”æ„Ÿæº«åº¦</span>
            <span class="value" id="feelsLike">0Â°C</span>
        </div>
        <div class="detail-item">
            <span class="label">æ¿•åº¦</span>
            <span class="value" id="humidity">0%</span>
        </div>
        <div class="detail-item">
            <span class="label">é¢¨é€Ÿ</span>
            <span class="value" id="wind">0 km/h</span>
        </div>
        <div class="detail-item">
            <span class="label">ç´«å¤–ç·š</span>
            <span class="value" id="uv">0</span>
        </div>
    </div>
</div>

<a href="index.html" class="back-btn">â† è¿”å›</a>

<script>
// 1. çµ±ä¸€ç®¡ç† API Key
const API_KEY = "fd430aaac39a4dd7b8c62413262101"; 

// 2. æ ¸å¿ƒæŸ¥è©¢å‡½æ•¸ (åˆä½µäº†æ‰€æœ‰é‚è¼¯)
async function getWeather() {
    const cityInput = document.getElementById('cityInput');
    const city = cityInput.value.trim();
    
    if (!city) return alert("è«‹è¼¸å…¥åŸå¸‚åç¨±");

    const url = `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${city}&aqi=no`;

    try {
        const response = await fetch(url);
        const data = await response.json();

        if (data.error) {
            alert("æ‰¾ä¸åˆ°è©²ä½ç½®ï¼Œè«‹ç¢ºèªåç¨±æ˜¯å¦æ­£ç¢º");
            return;
        }

        // --- A. è™•ç†é¡¯ç¤ºåç¨± (å„ªåŒ–é‚è¼¯) ---
        let displayName = `${data.location.name}, ${data.location.country}`;
        
        // é‡å°ä½ è¦æ±‚çš„ç‰¹å®šåœ°é»é€²è¡Œåç¨±å„ªåŒ–
        if (city === 'Urayasu') displayName = "ğŸ¡ æ±äº¬è¿ªå£«å°¼ (æµ¦å®‰)";
        else if (city.includes('Incheon')) displayName = "âœˆï¸ ä»å·åœ‹éš›æ©Ÿå ´";
        else if (city === 'Kaminoyama') displayName = "ğŸ‡¯ğŸ‡µ å±±å½¢ç¸£ä¸Šå±±å¸‚";
        else if (city === 'Macau') displayName = "ğŸ‡²ğŸ‡´ æ¾³é–€";
        else if (city === 'Hong Kong') displayName = "ğŸ‡­ğŸ‡° é¦™æ¸¯";
        else if (city === 'Taipei') displayName = "ğŸ‡¹ğŸ‡¼ å°åŒ—";

        // --- B. å¡«å…… UI è³‡æ–™ ---
        document.getElementById('cityName').innerText = displayName;
        document.getElementById('conditionText').innerText = data.current.condition.text;
        document.getElementById('tempValue').innerText = Math.round(data.current.temp_c);
        document.getElementById('feelsLike').innerText = data.current.feelslike_c + "Â°C";
        document.getElementById('humidity').innerText = data.current.humidity + "%";
        document.getElementById('wind').innerText = data.current.wind_kph + " km/h";
        document.getElementById('uv').innerText = data.current.uv;

        // --- C. é¡¯ç¤ºå¡ç‰‡ ---
        document.getElementById('weatherCard').style.display = 'block';

    } catch (error) {
        console.error("ç²å–å¤©æ°£å¤±æ•—:", error);
        alert("ç¶²è·¯éŒ¯èª¤æˆ– API Key å¤±æ•ˆ");
    }
}

// 3. å¿«é€Ÿæœå°‹åŠŸèƒ½
function quickSearch(query) {
    document.getElementById('cityInput').value = query;
    getWeather(); // åŸ·è¡Œä¸Šé¢é‚£å€‹åˆä½µå¾Œçš„å‡½æ•¸
}

// 4. é é¢è¼‰å…¥è‡ªå‹•æŸ¥è©¢é‚è¼¯
window.addEventListener('load', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const city = urlParams.get('city');

    if (city) {
        document.getElementById('cityInput').value = decodeURIComponent(city);
        getWeather(); 
    }
});
</script>

</body>
</html>