<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ç›®çš„åœ°å¤©æ°£ - æ—…éŠåŠ©æ‰‹</title>
<style>
/* å»¶çºŒä½ åŸæœ¬çš„é¢¨æ ¼æ ¸å¿ƒ */
* { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans TC", sans-serif; font-weight: 800; }
body { 
    margin: 0; 
    min-height: 100vh; 
    padding: 20px; 
    position: relative;
    overflow-x: hidden; /* é˜²æ­¢å·¦å³æ™ƒå‹• */
}

/* èƒŒæ™¯é–å®šå„ªåŒ– */
.bg-fixed { 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100vh; 
    background-image: url('images/weather/weatherbg.jpeg'); 
    background-size: cover; 
    background-position: center; 
    z-index: -1; 
    transform: translateZ(0);
    will-change: transform;
}

header { 
    padding: 16px; text-align: center; font-size: 22px; 
    border: 3px solid #000; background: #fff; 
    box-shadow: 6px 6px 0 #000; margin-bottom: 25px; 
}

header, .weather-card, input, .tag-btn {
    background: rgba(255, 255, 255, 0.9) !important;
    backdrop-filter: blur(5px);
}

/* 1. æœå°‹æ¬„å¯¬åº¦å„ªåŒ–ï¼šæ›´è²¼åˆæ‰‹æ©Ÿæ¯”ä¾‹ */
.search-box {
    display: flex; gap: 8px; margin-bottom: 20px;
}

input {
    flex: 2; /* è®“è¼¸å…¥æ¡†ä½”æ¯”å¤§ä¸€é» */
    border: 3px solid #000; padding: 12px;
    font-size: 16px; box-shadow: 4px 4px 0 #000;
    width: 100%; /* ç¢ºä¿ä¸æº¢å‡º */
}

.search-btn {
    flex: 1; /* æŒ‰éˆ•ä½”æ¯”å°ä¸€é» */
    background: #ff8c00 !important; border: 3px solid #000;
    padding: 0 10px; box-shadow: 4px 4px 0 #000; cursor: pointer;
    font-size: 16px;
}

/* 2. å¿«é€Ÿé¸æ“‡ï¼šæ©«å‘æ»‘å‹•é¸å–® */
.quick-select {
    margin-bottom: 25px;
}

.tag-outer-container {
    margin: 0 -20px; /* è² é‚Šè·è®“æ»‘å‹•å€åŸŸå¯ä»¥åˆ°é”è¢å¹•é‚Šç·£ */
    padding: 0 20px;
    overflow-x: auto; /* é–‹å•Ÿæ©«å‘æ»¾å‹• */
    -webkit-overflow-scrolling: touch; /* è®“ iOS æ»‘å‹•æ›´é †æš¢ */
    scrollbar-width: none; /* éš±è—ç«ç‹æ»¾å‹•æ¢ */
}

.tag-outer-container::-webkit-scrollbar {
    display: none; /* éš±è— Chrome/Safari æ»¾å‹•æ¢ */
}

.tag-container {
    display: flex;
    flex-wrap: nowrap; /* â­ å¼·åˆ¶ä¸æ›è¡Œ */
    gap: 12px;
    padding-bottom: 10px; /* ç•™ä¸€é»ç©ºé–“çµ¦é™°å½± */
}

.tag-btn {
    flex-shrink: 0; /* â­ é˜²æ­¢æŒ‰éˆ•è¢«å£“ç¸®è®Šå½¢ */
    background: #fff;
    border: 3px solid #000;
    padding: 10px 16px;
    font-size: 14px;
    font-weight: 800;
    cursor: pointer;
    box-shadow: 3px 3px 0 #000;
    transition: all 0.1s;
}

.tag-btn:active {
    transform: translate(2px, 2px);
    box-shadow: 1px 1px 0 #000;
    background: #ff8c00 !important;
    color: #fff;
}

/* å¤©æ°£å¡ç‰‡è¨­è¨ˆ */
.weather-card {
    background: #fff; border: 3px solid #000;
    padding: 25px; box-shadow: 8px 8px 0 #000;
    display: none;
    margin-bottom: 20px;
}

.city-name { font-size: 24px; margin-bottom: 5px; text-transform: uppercase; line-height: 1.2; }
.temp-main { font-size: 50px; color: #ff8c00; margin: 10px 0; }
.condition { font-size: 18px; border-bottom: 3px solid #000; padding-bottom: 10px; margin-bottom: 15px; }

.details-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
}

.detail-item {
    border: 2px solid #000; padding: 10px; background: rgba(249, 249, 249, 0.8);
}

.label { font-size: 11px; color: #666; display: block; margin-bottom: 4px; }
.value { font-size: 16px; }

.back-btn {
    display: inline-block;
    padding: 10px 24px; border: 3px solid #000;
    background: #fff !important; text-decoration: none; color: #000;
    box-shadow: 4px 4px 0 #000;
    margin-bottom: 50px;
}
</style>
</head>
<body>
<div class="bg-fixed"></div>

<header>ğŸŒ ç›®çš„åœ°å¤©æ°£</header>

<div class="search-box">
    <input type="text" id="cityInput" placeholder="è¼¸å…¥åŸå¸‚ (ä¾‹å¦‚: Tokyo)">
    <button class="search-btn" onclick="getWeather()">æŸ¥è©¢</button>
</div>

<div class="quick-select">
    <div style="font-size: 14px; margin-bottom: 10px; color: #000;">ğŸ“ å¿«é€Ÿé¸æ“‡ç›®çš„åœ° (å·¦å³æ»‘å‹•)ï¼š</div>
    <div class="tag-outer-container">
        <div class="tag-container">
            <button class="tag-btn" onclick="quickSearch('Macau')">ğŸ‡²ğŸ‡´ æ¾³é–€</button>
            <button class="tag-btn" onclick="quickSearch('Hong Kong')">ğŸ‡­ğŸ‡° é¦™æ¸¯</button>
            <button class="tag-btn" onclick="quickSearch('Taipei')">ğŸ‡¹ğŸ‡¼ å°åŒ—</button>
            <button class="tag-btn" onclick="quickSearch('Tokyo')">ğŸ‡¯ğŸ‡µ æ±äº¬</button>
            <button class="tag-btn" onclick="quickSearch('Sendai')">ğŸ‡¯ğŸ‡µ ä»™å°</button>
            <button class="tag-btn" onclick="quickSearch('Urayasu')">ğŸ¡ è¿ªå£«å°¼</button>
            <button class="tag-btn" onclick="quickSearch('Kaminoyama')">ğŸ‡¯ğŸ‡µ ä¸Šå±±</button>
            <button class="tag-btn" onclick="quickSearch('Yamagata')">ğŸ‡¯ğŸ‡µ å±±å½¢</button>
            <button class="tag-btn" onclick="quickSearch('Incheon')">ğŸ‡°ğŸ‡· ä»å·</button>
        </div>
    </div>
</div>

<div class="weather-card" id="weatherCard">
    <div class="city-name" id="cityName">---</div>
    <div class="condition" id="conditionText">---</div>
    <div class="temp-main"><span id="tempValue">0</span>Â°C</div>
    
    <div class="details-grid">
        <div class="detail-item"><span class="label">é«”æ„Ÿæº«åº¦</span><span class="value" id="feelsLike">0Â°C</span></div>
        <div class="detail-item"><span class="label">æ¿•åº¦</span><span class="value" id="humidity">0%</span></div>
        <div class="detail-item"><span class="label">é¢¨é€Ÿ</span><span class="value" id="wind">0 km/h</span></div>
        <div class="detail-item"><span class="label">ç´«å¤–ç·š</span><span class="value" id="uv">0</span></div>
    </div>
</div>

<a href="index.html" class="back-btn">â† è¿”å›</a>

<script>
const API_KEY = "fd430aaac39a4dd7b8c62413262101"; 

// é–å®šèƒŒæ™¯é«˜åº¦ï¼Œé˜²æ­¢è¡Œå‹•è£ç½®ç¶²å€åˆ—é–ƒçˆ
function fixBgHeight() {
    const bg = document.querySelector('.bg-fixed');
    if(bg) bg.style.height = window.innerHeight + 'px';
}

async function getWeather() {
    const cityInput = document.getElementById('cityInput');
    const city = cityInput.value.trim();
    if (!city) return;

    const url = `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${city}&aqi=no`;

    try {
        const response = await fetch(url);
        const data = await response.json();
        if (data.error) { alert("æ‰¾ä¸åˆ°è©²ä½ç½®"); return; }

        let displayName = `${data.location.name}, ${data.location.country}`;
        if (city === 'Urayasu') displayName = "ğŸ¡ æ±äº¬è¿ªå£«å°¼ (æµ¦å®‰)";
        else if (city.toLowerCase().includes('incheon')) displayName = "âœˆï¸ ä»å·åœ‹éš›æ©Ÿå ´";
        else if (city === 'Macau') displayName = "ğŸ‡²ğŸ‡´ æ¾³é–€";
        else if (city === 'Hong Kong') displayName = "ğŸ‡­ğŸ‡° é¦™æ¸¯";

        document.getElementById('cityName').innerText = displayName;
        document.getElementById('conditionText').innerText = data.current.condition.text;
        document.getElementById('tempValue').innerText = Math.round(data.current.temp_c);
        document.getElementById('feelsLike').innerText = data.current.feelslike_c + "Â°C";
        document.getElementById('humidity').innerText = data.current.humidity + "%";
        document.getElementById('wind').innerText = data.current.wind_kph + " km/h";
        document.getElementById('uv').innerText = data.current.uv;
        document.getElementById('weatherCard').style.display = 'block';

        // æŸ¥è©¢å¾Œè‡ªå‹•æ»¾å‹•åˆ°å¡ç‰‡ä½ç½®
        document.getElementById('weatherCard').scrollIntoView({ behavior: 'smooth' });

    } catch (error) {
        alert("ç¶²è·¯éŒ¯èª¤");
    }
}

function quickSearch(query) {
    document.getElementById('cityInput').value = query;
    getWeather();
}

window.addEventListener('load', () => {
    fixBgHeight();
    const urlParams = new URLSearchParams(window.location.search);
    const city = urlParams.get('city');
    if (city) {
        document.getElementById('cityInput').value = decodeURIComponent(city);
        getWeather(); 
    }
});

window.addEventListener('resize', fixBgHeight);
</script>

</body>
</html>
